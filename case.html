<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Latin Noun Quiz</title>
  <style>
    body { font-family: sans-serif; background: #f8f8fc; padding: 10px; }
    h2, h3 { text-align: center; }
    .case-column {
      border: 2px dashed #ccc;
      border-radius: 8px;
      padding: 8px;
      margin: 10px;
      min-height: 50px;
      background-color: #fff;
    }
    .case-column.correct { border-color: green; background-color: #e0ffe0; }
    .case-column.incorrect { border-color: red; background-color: #ffe0e0; }
    .noun-button {
      display: inline-block;
      padding: 5px 10px;
      margin: 4px;
      font-size: 1rem;
      background-color: #e0f7fa;
      border: 1px solid #00796b;
      border-radius: 5px;
      cursor: pointer;
    }
    .noun-button.selected { background-color: #ffd54f; }
    .controls, .navigation, .word-bank, .quiz-area { text-align: center; margin: 10px; }
    .hidden { display: none; }
    button { padding: 8px 12px; margin: 5px; font-size: 1rem; }
  </style>
</head>
<body><h2>Latin Noun Quiz</h2><div id="setupMenu">
  <h3>Select Declension Sets</h3>
  <label><input type="checkbox" value="puella" checked> 1st – puella</label>
  <label><input type="checkbox" value="servus" checked> 2nd – servus</label>
  <label><input type="checkbox" value="templum" checked> 2nd – templum</label>  <h3>Select Cases</h3>
  <label><input type="checkbox" value="Nominative" checked> Nominative</label>
  <label><input type="checkbox" value="Genitive" checked> Genitive</label>
  <label><input type="checkbox" value="Dative" checked> Dative</label>
  <label><input type="checkbox" value="Accusative" checked> Accusative</label>
  <label><input type="checkbox" value="Ablative" checked> Ablative</label><br><br> <button onclick="startQuiz()">Start Quiz</button>

</div><div class="quiz-area hidden" id="quizArea">
  <h3 id="setName"></h3>
  <div id="caseArea"></div>
  <div class="word-bank" id="wordBank"></div>
  <div class="controls">
    <button onclick="checkAnswers()">Check Answers</button>
    <button onclick="resetSet()">Reset</button>
  </div>
  <div class="navigation">
    <button onclick="prevSet()">Previous</button>
    <button onclick="nextSet()">Next</button>
  </div>
</div><script>
const nounData = {
  puella: [
    { form: "puella", case: "Nominative" },
    { form: "puellae", case: "Genitive" },
    { form: "puellae", case: "Dative" },
    { form: "puellam", case: "Accusative" },
    { form: "puella", case: "Ablative" },
    { form: "puellae", case: "Nominative" },
    { form: "puellārum", case: "Genitive" },
    { form: "puellīs", case: "Dative" },
    { form: "puellās", case: "Accusative" },
    { form: "puellīs", case: "Ablative" },
  ],
  terra: [
      { form: "terra", case: "Nominative" },
      { form: "terrae", case: "Genitive" },
      { form: "terrae", case: "Dative" },
      { form: "terram", case: "Accusative" },
      { form: "terra", case: "Ablative" },
      { form: "terrae", case: "Nominative" },
      { form: "terrarum", case: "Genitive" },
      { form: "terris", case: "Dative" },
      { form: "terras", case: "Accusative" },
      { form: "terris", case: "Ablative" }
    ],
  puerra: [
      { form: "puer", case: "Nominative" },
      { form: "pueri", case: "Genitive" },
      { form: "puero", case: "Dative" },
      { form: "puerum", case: "Accusative" },
      { form: "puerō", case: "Ablative" },
      { form: "pueri", case: "Nominative" },
      { form: "puerōrum", case: "Genitive" },
      { form: "puerīs", case: "Dative" },
      { form: "puerōs", case: "Accusative" },
      { form: "puerīs", case: "Ablative" }
    ]
};

let selectedNouns = [], selectedCases = [], currentSetIndex = 0, selectedWord = null;

function startQuiz() {
  selectedNouns = Array.from(document.querySelectorAll('#setupMenu input[type=checkbox]:checked'))
    .filter(cb => Object.keys(nounData).includes(cb.value))
    .map(cb => cb.value);

  selectedCases = Array.from(document.querySelectorAll('#setupMenu input[type=checkbox]:checked'))
    .filter(cb => ['Nominative','Genitive','Dative','Accusative','Ablative'].includes(cb.value))
    .map(cb => cb.value);

  if (!selectedNouns.length || !selectedCases.length) return alert("Select at least one noun and one case.");

  document.getElementById("setupMenu").classList.add("hidden");
  document.getElementById("quizArea").classList.remove("hidden");
  loadSet();
}

function loadSet() {
  const noun = selectedNouns[currentSetIndex];
  document.getElementById("setName").innerText = `Set ${currentSetIndex + 1}: ${noun}`;
  const caseArea = document.getElementById("caseArea");
  const wordBank = document.getElementById("wordBank");
  caseArea.innerHTML = wordBank.innerHTML = "";

  selectedCases.forEach(c => {
    const col = document.createElement("div");
    col.className = "case-column";
    col.dataset.case = c;
    col.onclick = () => {
      if (selectedWord) {
        col.appendChild(selectedWord);
        selectedWord.classList.remove("selected");
        selectedWord = null;
      }
    };
    col.innerHTML = `<strong>${c}</strong>`;
    caseArea.appendChild(col);
  });

  nounData[noun].filter(n => selectedCases.includes(n.case)).forEach(n => {
    const btn = document.createElement("div");
    btn.className = "noun-button";
    btn.textContent = n.form;
    btn.dataset.case = n.case;
    btn.onclick = () => {
      if (btn.parentNode.id === "wordBank") {
        if (selectedWord && selectedWord !== btn) selectedWord.classList.remove("selected");
        selectedWord = selectedWord === btn ? null : btn;
        btn.classList.toggle("selected");
      } else {
        document.getElementById("wordBank").appendChild(btn);
        btn.classList.remove("selected");
        selectedWord = null;
      }
    };
    wordBank.appendChild(btn);
  });
}

function checkAnswers() {
  let total = 0, correct = 0;
  document.querySelectorAll(".case-column").forEach(col => {
    const expected = col.dataset.case;
    col.classList.remove("correct", "incorrect");
    Array.from(col.children).forEach(child => {
      if (child.classList.contains("noun-button")) {
        total++;
        if (child.dataset.case === expected) {
          correct++;
          col.classList.add("correct");
        } else {
          col.classList.add("incorrect");
        }
      }
    });
  });
  if (total && total === correct) setTimeout(nextSet, 1000);
}

function resetSet() { loadSet(); }
function prevSet() { if (currentSetIndex > 0) { currentSetIndex--; loadSet(); } }
function nextSet() { if (currentSetIndex < selectedNouns.length - 1) { currentSetIndex++; loadSet(); } }
</script></body>
</html>
