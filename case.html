<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Latin Noun Quiz</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f9; margin: 0; padding: 0; }
    h2, h3 { text-align: center; }
    .menu, .controls, .quiz-area { padding: 1em; text-align: center; }
    .case-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 1em; }
    .case-box {
      border: 2px dashed #aaa;
      border-radius: 8px;
      min-height: 60px;
      width: 120px;
      padding: 8px;
      background: #fff;
      position: relative;
    }
    .case-box.selected { border-color: #333; }
    .case-box.correct { background-color: #c8e6c9; }
    .case-box.incorrect { background-color: #ffcdd2; }
    .noun-button {
      display: inline-block;
      margin: 5px;
      padding: 8px 12px;
      font-size: 1rem;
      background: #e0f7fa;
      border: 1px solid #00796b;
      border-radius: 5px;
      cursor: pointer;
    }
    .noun-button.selected { background-color: #b2ebf2; }
    .noun-in-box { position: absolute; top: 30px; left: 5px; right: 5px; word-wrap: break-word; }
    button { padding: 10px 15px; margin: 10px; font-size: 1rem; }
  </style>
</head>
<body><h2>Latin Noun Quiz</h2><div class="menu" id="startMenu">
  <h3>Select Declensions and Cases:</h3>
  <div>
    <label><input type="checkbox" class="declension-check" value="vir" checked> vir</label>
    <label><input type="checkbox" class="declension-check" value="oppidum" checked> oppidum</label>
    <label><input type="checkbox" class="declension-check" value="fluvius" checked> fluvius</label>
    <label><input type="checkbox" class="declension-check" value="puer" checked> puer</label>
    <label><input type="checkbox" class="declension-check" value="terra" checked> terra</label>
  </div>
  <h3>Cases</h3>
  <div>
    <label><input type="checkbox" class="case-check" value="Nominative" checked> Nominative</label>
    <label><input type="checkbox" class="case-check" value="Genitive" checked> Genitive</label>
    <label><input type="checkbox" class="case-check" value="Dative" checked> Dative</label>
    <label><input type="checkbox" class="case-check" value="Accusative" checked> Accusative</label>
    <label><input type="checkbox" class="case-check" value="Ablative" checked> Ablative</label>
  </div>
  <button onclick="startQuiz()">Start</button>
</div><div class="quiz-area" id="quizArea" style="display:none">
  <h3 id="nounTitle"></h3>
  <div class="case-grid" id="caseGrid"></div>
  <div id="nounButtons"></div>
</div><div class="controls" id="controls" style="display:none">
  <button onclick="prevNoun()">Previous</button>
  <button onclick="checkAnswers()">Check</button>
  <button onclick="nextNoun()">Next</button>
</div><audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-09.mp3"></audio> <audio id="wrongSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
const allNouns = {
  "vir": {
    Nominative: ["vir", "virī"],
    Genitive: ["virī", "virōrum"],
    Dative: ["virō", "virīs"],
    Accusative: ["virum", "virōs"],
    Ablative: ["virō", "virīs"]
  },
  "oppidum": {
    Nominative: ["oppidum", "oppida"],
    Genitive: ["oppidī", "oppidōrum"],
    Dative: ["oppidō", "oppidīs"],
    Accusative: ["oppidum", "oppida"],
    Ablative: ["oppidō", "oppidīs"]
  },
  "fluvius": {
    Nominative: ["fluvius", "fluviī"],
    Genitive: ["fluviī", "fluviōrum"],
    Dative: ["fluviō", "fluviīs"],
    Accusative: ["fluviōrum", "fluviōs"],
    Ablative: ["fluviō", "fluviīs"]
  },
  "puer": {
    Nominative: ["puer", "puerī"],
    Genitive: ["puerī", "puerōrum"],
    Dative: ["puerō", "puerīs"],
    Accusative: ["puerum", "puerōs"],
    Ablative: ["puerō", "puerīs"]
  },
  "terra": {
    Nominative: ["terra", "terrae"],
    Genitive: ["terrae", "terrārum"],
    Dative: ["terrae", "terrīs"],
    Accusative: ["terram", "terrās"],
    Ablative: ["terrā", "terrīs"]
  }
};

let selectedNouns = [], selectedCases = [], currentNoun = 0;
let selectedWord = null;

function startQuiz() {
  selectedNouns = Array.from(document.querySelectorAll('.declension-check:checked')).map(cb => cb.value);
  selectedCases = Array.from(document.querySelectorAll('.case-check:checked')).map(cb => cb.value);
  if (!selectedNouns.length || !selectedCases.length) return alert("Please select at least one noun and one case.");

  document.getElementById('startMenu').style.display = 'none';
  document.getElementById('quizArea').style.display = 'block';
  document.getElementById('controls').style.display = 'block';
  renderQuiz();
}

function renderQuiz() {
  selectedWord = null;
  document.getElementById('nounTitle').innerText = selectedNouns[currentNoun];
  const nounData = allNouns[selectedNouns[currentNoun]];
  const grid = document.getElementById('caseGrid');
  grid.innerHTML = '';

  selectedCases.forEach(caseName => {
    const div = document.createElement('div');
    div.className = 'case-box';
    div.dataset.case = caseName;
    div.onclick = () => placeInBox(div);
    div.innerHTML = `<strong>${caseName}</strong><div class="noun-in-box"></div>`;
    grid.appendChild(div);
  });

  const buttons = document.getElementById('nounButtons');
  buttons.innerHTML = '';
  const allForms = selectedCases.flatMap(c => nounData[c]);
  allForms.forEach(form => {
    const btn = document.createElement('div');
    btn.className = 'noun-button';
    btn.innerText = form;
    btn.onclick = () => selectNoun(btn);
    buttons.appendChild(btn);
  });
}

function selectNoun(el) {
  if (selectedWord === el) {
    el.classList.remove('selected');
    selectedWord = null;
  } else {
    document.querySelectorAll('.noun-button').forEach(btn => btn.classList.remove('selected'));
    el.classList.add('selected');
    selectedWord = el;
  }
}

function placeInBox(box) {
  if (!selectedWord) return;
  const slot = box.querySelector('.noun-in-box');
  if (slot.innerText) return;
  slot.innerText = selectedWord.innerText;
  selectedWord.remove();
  selectedWord = null;
}

function checkAnswers() {
  let correct = 0;
  let total = selectedCases.length;
  const nounData = allNouns[selectedNouns[currentNoun]];
  document.querySelectorAll('.case-box').forEach(box => {
    box.classList.remove('correct', 'incorrect');
    const slot = box.querySelector('.noun-in-box');
    const answer = slot.innerText.trim();
    if (nounData[box.dataset.case].includes(answer)) {
      box.classList.add('correct');
      correct++;
    } else {
      box.classList.add('incorrect');
    }
  });
  if (correct === total) {
    document.getElementById('correctSound').play();
    setTimeout(() => nextNoun(), 1000);
  } else {
    document.getElementById('wrongSound').play();
  }
}

function nextNoun() {
  if (currentNoun < selectedNouns.length - 1) {
    currentNoun++;
    renderQuiz();
  }
}

function prevNoun() {
  if (currentNoun > 0) {
    currentNoun--;
    renderQuiz();
  }
}
</script></body>
</html>
